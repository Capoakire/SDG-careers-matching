<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Career Match for a Better World</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #ADD8E6 0%, #1E90FF 100%);
      margin: 0;
      padding: 20px;
      color: #000000;
    }
    h1 {
      color: #FFFFFF;
      text-shadow: 2px 2px 4px #000000;
      animation: fadeIn 2s;
    }
    #instructions {
      background: rgba(255, 255, 255, 0.9);
      padding: 10px;
      border-radius: 10px;
      margin: 10px auto;
      max-width: 800px;
    }
    #game-container {
      max-width: 1200px;
      margin: 0 auto;
      background: linear-gradient(135deg, #FFFFFF 0%, #ADD8E6 100%);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      display: flex;
      transition: transform 0.3s ease;
    }
    #game-container:hover {
      transform: scale(1.02);
    }
    #left-box, #right-box, #grid {
      width: 33.33%;
      padding: 10px;
    }
    #left-box {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
      padding: 15px;
    }
    .job-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 5px;
      transition: transform 0.2s;
    }
    .job-item:hover {
      transform: scale(1.1);
    }
    #left-box img, .drop-zone img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      cursor: move;
      border: 2px solid #1E90FF;
      border-radius: 10px;
      transition: box-shadow 0.3s;
    }
    #left-box img:hover, .drop-zone img:hover, #left-box img:focus, .drop-zone img:focus {
      box-shadow: 0 0 10px #28A745;
    }
    #right-box {
      background: rgba(30, 144, 255, 0.8);
      border-radius: 10px;
      padding: 15px;
    }
    #right-box div {
      width: 100px;
      padding: 5px;
      margin: 10px 0;
      background-color: #FFFFFF;
      border: 2px solid #28A745;
      cursor: move;
      user-select: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    #right-box div:hover, #right-box div:focus {
      background-color: #E0F7E9;
    }
    #grid {
      border-left: 1px solid #1E90FF;
      border-right: 1px solid #1E90FF;
      min-height: 500px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 10px;
      padding: 15px;
    }
    .match-row {
      margin: 10px 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .sdg-label {
      font-weight: bold;
      color: #000000;
      margin-bottom: 5px;
      text-shadow: 1px 1px 2px #ADD8E6;
    }
    .drop-zone {
      width: 100px;
      height: 150px;
      border: 2px dashed #28A745;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      background-color: #FFFFFF;
      border-radius: 10px;
      transition: border-color 0.3s, background-color 0.3s;
      position: relative;
    }
    .drop-zone.dragover {
      border-color: #218838;
      background-color: #E0F7E9;
    }
    .drop-zone.incomplete {
      border-color: #FF4500;
      background-color: #FFE6E6;
    }
    .drop-zone img, .drop-zone div {
      margin: 2px 0;
    }
    .bin-button {
      width: 20px;
      height: 20px;
      background-color: #FF4500;
      border: none;
      border-radius: 50%;
      color: #FFFFFF;
      cursor: pointer;
      font-size: 12px;
      line-height: 20px;
      position: absolute;
      top: -10px;
      right: -10px;
      transition: transform 0.3s, background-color 0.3s;
    }
    .bin-button:hover, .bin-button:focus {
      transform: scale(1.2);
      background-color: #DC143C;
    }
    button {
      background: linear-gradient(135deg, #28A745 0%, #218838 100%);
      color: #FFFFFF;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
      text-shadow: 1px 1px 2px #000000;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    button:hover, button:focus {
      transform: scale(1.05);
      box-shadow: 0 0 10px #28A745;
    }
    #score, #result {
      font-size: 20px;
      color: #000000;
      margin: 20px 0;
      text-shadow: 1px 1px 2px #ADD8E6;
    }
    #correct-answers {
      display: none;
      margin-top: 20px;
      text-align: left;
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
    #correct-answers li strong {
      font-weight: bold;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @media (max-width: 768px) {
      #game-container {
        flex-direction: column;
      }
      #left-box, #right-box, #grid {
        width: 100%;
      }
      .job-item img, .drop-zone img {
        width: 80px;
        height: 80px;
      }
      .drop-zone, #right-box div {
        width: 80px;
      }
    }
  </style>
</head>
<body>
  <h1>Career Match for a Better World</h1>
  <div id="instructions">
    <p><strong>How to Play:</strong> Drag career images from the left box and career names from the right box to the SDG drop zones in the center. Both an image and a name must be dropped for a complete match. Drop zones with only an image or name will show a red border. Click "Check Answers" to score!</p>
  </div>
  <div id="game-container">
    <div id="left-box">
      <h3>Career Pictures</h3>
    </div>
    <div id="right-box">
      <h3>Career Names</h3>
    </div>
    <div id="grid">
      <h3>Matches</h3>
    </div>
  </div>
  <button onclick="checkAnswers()">Check Answers</button>
  <button onclick="resetGame()">Reset Game</button>
  <p id="score">Points: 0</p>
  <p id="result"></p>
  <div id="correct-answers">
    <h2>Feedback and Correct Answers</h2>
    <ul id="correct-list"></ul>
  </div>

  <script>
    const careers = [
      { name: 'Judge', sdg: ['SDG 1: No poverty', 'SDG 16: Peace, justice and strong institutions'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/judge.png', correctSentence: 'Judges ensure fair laws to reduce poverty and promote justice.' },
      { name: 'Farmer', sdg: ['SDG 2: Zero hunger', 'SDG 12: Responsible consumption and production', 'SDG 15: Life on land'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/farmer.png', correctSentence: 'Farmers grow food sustainably, reduce waste, and protect land.' },
      { name: 'Doctor', sdg: ['SDG 3: Good health and well-being', 'SDG 6: Clean water and sanitation'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/doctor.png', correctSentence: 'Doctors provide healthcare and support clean water initiatives.' },
      { name: 'Teacher', sdg: ['SDG 4: Quality education', 'SDG 5: Gender equality'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/teacher.png', correctSentence: 'Teachers educate and promote gender equality.' },
      { name: 'Diplomat', sdg: ['SDG 5: Gender equality', 'SDG 17: Partnerships for the goals'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/diplomat.png', correctSentence: 'Diplomats promote gender equality and global cooperation.' },
      { name: 'Scientist', sdg: ['SDG 6: Clean water and sanitation', 'SDG 13: Climate action', 'SDG 9: Industry, innovation and infrastructure'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/scientist.png', correctSentence: 'Scientists improve water, combat climate change, and innovate technology.' },
      { name: 'Chef', sdg: ['SDG 7: Affordable and clean energy', 'SDG 12: Responsible consumption and production'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/chef.png', correctSentence: 'Chefs use renewable energy and reduce food waste.' },
      { name: 'Architect', sdg: ['SDG 8: Decent work and economic growth', 'SDG 9: Industry, innovation and infrastructure', 'SDG 11: Sustainable cities and communities', 'SDG 13: Climate action'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/architect.png', correctSentence: 'Architects create jobs, innovate buildings, design sustainable cities, and address climate impacts.' },
      { name: 'Programmer', sdg: ['SDG 9: Industry, innovation and infrastructure', 'SDG 8: Decent work and economic growth'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/programmer.png', correctSentence: 'Programmers innovate technology and support job creation.' },
      { name: 'Journalist', sdg: ['SDG 10: Reduced inequalities', 'SDG 16: Peace, justice and strong institutions'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/journalist.png', correctSentence: 'Journalists highlight inequalities and justice issues.' },
      { name: 'Reporter', sdg: ['SDG 11: Sustainable cities and communities', 'SDG 13: Climate action'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/reporter.png', correctSentence: 'Reporters cover urban sustainability and climate news.' },
      { name: 'Astronaut', sdg: ['SDG 12: Responsible consumption and production', 'SDG 13: Climate action'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/astronaut.png', correctSentence: 'Astronauts promote space sustainability and climate research.' },
      { name: 'Politician', sdg: ['SDG 13: Climate action', 'SDG 1: No poverty'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/politician.png', correctSentence: 'Politicians create policies to reduce poverty and address climate change.' },
      { name: 'Veterinarian', sdg: ['SDG 14: Life below water', 'SDG 15: Life on land'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/veterinarian.png', correctSentence: 'Veterinarians protect marine and land wildlife.' },
      { name: 'Military', sdg: ['SDG 15: Life on land', 'SDG 16: Peace, justice and strong institutions'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/military.png', correctSentence: 'Military forces protect land and maintain peace.' },
      { name: 'Police', sdg: ['SDG 16: Peace, justice and strong institutions'], image: 'https://raw.githubusercontent.com/Capoakire/SDG-careers-matching/main/police.png', correctSentence: 'Police ensure safety and justice in communities.' },
      { name: 'President', sdg: ['SDG 17: Partnerships for the goals', 'SDG 5: Gender equality'], image: 'https://via.placeholder.com/100?text=President', correctSentence: 'Presidents foster global partnerships and promote gender equality.' }
    ];

    // Fisher-Yates shuffle algorithm
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function initializeGame() {
      const leftBox = document.getElementById('left-box');
      const rightBox = document.getElementById('right-box');
      const grid = document.getElementById('grid');

      // Populate left box with draggable career pictures
      careers.forEach(career => {
        const item = document.createElement('div');
        item.className = 'job-item';
        item.innerHTML = `
          <img src="${career.image}" draggable="true" id="img-${career.name}" style="border: 2px solid #1E90FF" aria-label="Career image for ${career.name}" role="img">
        `;
        item.querySelector('img').addEventListener('dragstart', dragStart);
        item.querySelector('img').setAttribute('tabindex', '0');
        item.querySelector('img').addEventListener('keydown', handleKeydown);
        leftBox.appendChild(item);
      });

      // Populate right box with shuffled career names
      const shuffledCareers = shuffle([...careers]);
      shuffledCareers.forEach(career => {
        const div = document.createElement('div');
        div.textContent = career.name;
        div.draggable = true;
        div.id = `name-${career.name.replace(/ /g, '-')}`;
        div.setAttribute('tabindex', '0');
        div.setAttribute('aria-label', `Career name: ${career.name}`);
        div.addEventListener('dragstart', dragStart);
        div.addEventListener('keydown', handleKeydown);
        rightBox.appendChild(div);
      });

      // Populate grid with SDG labels, drop zones, and bin buttons
      careers.forEach(career => {
        const row = document.createElement('div');
        row.className = 'match-row';
        row.innerHTML = `
          <div class="sdg-label">${career.sdg[0]}</div>
          <div class="drop-zone" id="drop-${career.sdg[0].replace(/[: ]/g, '-')}" data-sdg="${career.sdg.join(', ')}" role="region" aria-label="Drop zone for ${career.sdg[0]}">
            <button class="bin-button" onclick="clearDropZone(this)" aria-label="Clear drop zone">Bin</button>
          </div>
        `;
        row.querySelector('.drop-zone').addEventListener('dragover', dragOver);
        row.querySelector('.drop-zone').addEventListener('drop', drop);
        row.querySelector('.drop-zone').setAttribute('tabindex', '0');
        row.querySelector('.drop-zone').addEventListener('keydown', handleKeydown);
        row.querySelector('.bin-button').setAttribute('tabindex', '0');
        grid.appendChild(row);
      });
    }

    document.addEventListener('DOMContentLoaded', initializeGame);

    let draggedItem = null;
    let selectedItem = null;

    function dragStart(e) {
      draggedItem = e.target;
      e.dataTransfer.setData('text/plain', e.target.id);
      e.dataTransfer.effectAllowed = 'move';
      selectedItem = e.target;
      console.log(`Dragging: ${e.target.id}`);
    }

    function dragOver(e) {
      e.preventDefault();
      e.target.classList.add('dragover');
    }

    function drop(e) {
      e.preventDefault();
      e.target.classList.remove('dragover');
      const itemId = e.dataTransfer.getData('text/plain');
      const item = document.getElementById(itemId);
      if (item && e.target.classList.contains('drop-zone')) {
        if (item.tagName === 'IMG' && !e.target.querySelector('img')) {
          const clone = item.cloneNode(true);
          clone.style.width = '100px';
          clone.style.height = '100px';
          clone.setAttribute('tabindex', '0');
          clone.addEventListener('dragstart', dragStart);
          clone.addEventListener('keydown', handleKeydown);
          e.target.appendChild(clone);
          console.log(`Dropped image ${item.id} into ${e.target.id}`);
          updateDropZoneStatus(e.target);
        } else if (item.tagName === 'DIV' && !e.target.querySelector('div')) {
          const clone = item.cloneNode(true);
          clone.style.position = 'static';
          clone.setAttribute('tabindex', '0');
          clone.addEventListener('dragstart', dragStart);
          clone.addEventListener('keydown', handleKeydown);
          e.target.appendChild(clone);
          item.style.display = 'none';
          console.log(`Dropped name ${item.textContent} into ${e.target.id}`);
          updateDropZoneStatus(e.target);
        }
      } else if (item && item.parentElement.id === 'right-box') {
        item.style.display = 'block';
      }
    }

    function clearDropZone(button) {
      const dropZone = button.parentElement;
      const originalName = dropZone.querySelector('div');
      if (originalName) {
        const nameId = `name-${originalName.textContent.replace(/ /g, '-')}`;
        const originalNameElement = document.getElementById(nameId);
        if (originalNameElement) {
          originalNameElement.style.display = 'block';
        }
      }
      dropZone.innerHTML = '<button class="bin-button" onclick="clearDropZone(this)" aria-label="Clear drop zone">Bin</button>';
      dropZone.addEventListener('dragover', dragOver);
      dropZone.addEventListener('drop', drop);
      dropZone.setAttribute('tabindex', '0');
      dropZone.addEventListener('keydown', handleKeydown);
      dropZone.querySelector('.bin-button').setAttribute('tabindex', '0');
      dropZone.classList.remove('incomplete');
      console.log(`Cleared drop zone ${dropZone.id}`);
    }

    function updateDropZoneStatus(dropZone) {
      const img = dropZone.querySelector('img');
      const nameDiv = dropZone.querySelector('div');
      if ((img && !nameDiv) || (!img && nameDiv)) {
        dropZone.classList.add('incomplete');
      } else {
        dropZone.classList.remove('incomplete');
      }
    }

    function handleKeydown(e) {
      if (e.key === 'Enter' && e.target.classList.contains('bin-button')) {
        clearDropZone(e.target);
      } else if (e.key === 'Enter' && selectedItem) {
        const target = e.target.classList.contains('drop-zone') ? e.target : null;
        if (target) {
          const event = { preventDefault: () => {}, target };
          event.dataTransfer = { getData: () => selectedItem.id };
          drop(event);
        }
      } else if (e.key === 'ArrowRight' || e.key === 'ArrowLeft' || e.key === 'ArrowUp' || e.key === 'ArrowDown') {
        const items = Array.from(document.querySelectorAll('img, #right-box div, .drop-zone, .bin-button'));
        const currentIndex = items.indexOf(e.target);
        let nextIndex = currentIndex + (e.key === 'ArrowRight' || e.key === 'ArrowDown' ? 1 : -1);
        if (nextIndex < 0) nextIndex = items.length - 1;
        if (nextIndex >= items.length) nextIndex = 0;
        items[nextIndex].focus();
        selectedItem = items[nextIndex];
      }
    }

    function checkAnswers() {
      let points = 0;
      let choicesMade = [];
      const dropZones = document.querySelectorAll('.drop-zone');

      dropZones.forEach(zone => {
        const img = zone.querySelector('img');
        const nameDiv = zone.querySelector('div');
        if (img && nameDiv) {
          const careerName = img.id.replace('img-', '');
          const chosenName = nameDiv.textContent;
          if (careerName !== chosenName) {
            choicesMade.push(`Mismatch: Image (${careerName}) and name (${chosenName}) do not correspond in ${zone.getAttribute('data-sdg').split(', ')[0]}`);
            return;
          }
          const career = careers.find(c => c.name === careerName);
          const validSdgs = career.sdg;
          if (validSdgs.includes(zone.getAttribute('data-sdg').split(', ')[0])) {
            points += 10;
            choicesMade.push(`${careerName} correctly matches ${zone.getAttribute('data-sdg').split(', ')[0]}`);
          } else if (validSdgs.some(sdg => zone.getAttribute('data-sdg').includes(sdg))) {
            points += 1;
            choicesMade.push(`${careerName} also matches ${zone.getAttribute('data-sdg').split(', ')[0]} as a valid option`);
          } else {
            points += 0;
            choicesMade.push(`${careerName} does not match ${zone.getAttribute('data-sdg').split(', ')[0]}. Correct options are: ${validSdgs.join(', ')}`);
          }
        } else {
          points += 0;
          const status = img ? `Image only (${img.id.replace('img-', '')})` : nameDiv ? `Name only (${nameDiv.textContent})` : 'Empty';
          choicesMade.push(`Incomplete match for ${zone.getAttribute('data-sdg').split(', ')[0]}: ${status}`);
        }
      });

      console.log('Choices made:', choicesMade);
      document.getElementById('score').innerText = `Points: ${points}`;
      document.getElementById('result').innerText = points === 170 ? 'Perfect! All correct!' : `You got ${points} points. Try again!`;

      const correctAnswers = document.getElementById('correct-answers');
      correctAnswers.style.display = 'block';
      const correctList = document.getElementById('correct-list');
      correctList.innerHTML = `<h3>Your Choices:</h3>${choicesMade.map(choice => `<li>${choice}</li>`).join('')}<hr><h3>Correct Answers:</h3>${careers.map(career => `<li><strong>${career.name}</strong>: ${career.sdg.join(', ')} - ${career.correctSentence}</li>`).join('')}`;
    }

    function resetGame() {
      const leftBox = document.getElementById('left-box');
      const rightBox = document.getElementById('right-box');
      const grid = document.getElementById('grid');
      const score = document.getElementById('score');
      const result = document.getElementById('result');
      const correctAnswers = document.getElementById('correct-answers');
      leftBox.innerHTML = '<h3>Career Pictures</h3>';
      rightBox.innerHTML = '<h3>Career Names</h3>';
      grid.innerHTML = '<h3>Matches</h3>';
      score.innerText = 'Points: 0';
      result.innerText = '';
      correctAnswers.style.display = 'none';
      initializeGame();
    }
  </script>
</body>
</html>
